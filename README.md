# Moorgan-IoT: Smart Health & Activity Monitor üêÑ

[][platform-link]
[][framework-link]
[][language-link]
[](https://www.google.com/search?q=LICENSE)
[](https://www.google.com/search?q=%23)

> An advanced IoT solution for real-time monitoring of health and environmental metrics using an ESP32-C3, various sensors, and the Azure IoT Hub. This repository contains the firmware for the IoT device.

This project is designed to be a robust, power-efficient IoT device that captures sensor data, processes it, and securely transmits it to the cloud for further analysis and visualization. It features a sophisticated power management system with deep sleep cycles and seamless Wi-Fi provisioning via Bluetooth LE.

-----

### ‚ú® Key Features

  * **Multi-Sensor Data Fusion:**
      * üå°Ô∏è **Temperature:** Reads ambient temperature using a `DS18B20` sensor.
      * ‚ù§Ô∏è **Health Vitals:** Measures Heart Rate and SpO2 levels with a `MAX30102` sensor.
      * üèÉ **Motion Tracking:** Captures 6-axis motion data (accelerometer + gyroscope) using an `MPU6050`.
      * üîã **Battery Monitoring:** Actively monitors the battery level to ensure device longevity.
  * **‚òÅÔ∏è Cloud Integration:**
      * Securely connects and sends telemetry data to **Azure IoT Hub**.
      * Uses MQTT protocol for efficient and reliable communication.
  * **Advanced Power Management:**
      * Utilizes **deep sleep** functionality to dramatically reduce power consumption between readings.
      * Wakes up periodically, reads data, sends it, and returns to sleep, making it ideal for battery-powered applications.
  * **üí° Smart Provisioning:**
      * **Bluetooth LE Provisioning:** Allows users to set up Wi-Fi credentials easily from a smartphone app without hardcoding them.
      * **Resilient Connectivity:** Automatically attempts to reconnect to Wi-Fi and can re-enter provisioning mode if connection is persistently lost.
  * **On-Device Data Processing:**
      * Applies windowing and calculates mean/standard deviation for MPU6050 motion data to extract meaningful features before transmission.
      * Processes raw PPG (photoplethysmography) data to calculate Heart Rate and SpO2 with noise filtering.

-----

## üì∏ Showcase

<table align="center">
  <tr>
    <td align="center">
      <img src="assets/images/all_preview.jpg" alt="All preview of the IOT device" width="260">
      <br>
      <sub><b>Project Showcase</b></sub>
    </td>
    <td align="center">
      <img src="assets/images/circuit_scheme.jpg" alt="Electronic circuit scheme of the device" width="260">
      <br>
      <sub><b>Circuit Scheme</b></sub>
    </td>
    <td align="center">
      <img src="assets/images/top_view.jpg" alt="Cinematic shot of the device from the top" width="260">
      <br>
      <sub><b>Device Top View</b></sub>
    </td>
  </tr>
</table>



-----

## üõ†Ô∏è Hardware & Software Stack

### Hardware Components

  * **Microcontroller:** ESP32-C3 DevKitM-1
  * **Sensors:**
      * `MPU6050` Inertial Measurement Unit
      * `MAX30102` Pulse Oximeter and Heart-Rate Sensor
      * `DS18B20` Digital Temperature Sensor
  * **Power:** Li-Ion Battery with a voltage monitoring circuit.

### Software & Libraries

  * **Platform:** [PlatformIO][platform-link]
  * **Framework:** [Arduino][framework-link]
  * **Cloud Backend:** [Azure IoT Hub][azure-link]
  * **Key Libraries:**
      * `AzureIoTHub` & `AzureIoTProtocol_MQTT` for cloud connectivity.
      * `ArduinoJson` for serializing data for transmission.
      * `DS18B20` library for the temperature sensor.
      * Custom drivers for `MPU6050` and `MAX30102`.

-----

## üèóÔ∏è System Architecture

The device operates in a cyclical manner optimized for low power consumption:

1.  **Wake Up:** The ESP32-C3 wakes from deep sleep, triggered by a timer. It retains its boot count across sleep cycles using `RTC_DATA_ATTR`.
2.  **Connect:** It connects to the pre-configured Wi-Fi network. If no credentials are stored, it enters **BLE provisioning mode** (BLE Provisioning service is turned of by default because of resource limitation on the ESP32-C3).
3.  **Collect Data:** It polls all connected sensors (`MAX30102`, `MPU6050`, `DS18B20`) and the battery monitor for new readings.
4.  **Process Data:** The raw sensor data is processed on-device to calculate metrics like heart rate, SpO2, and motion features.
5.  **Transmit Data:** The processed data is serialized into a JSON payload and sent to the Azure IoT Hub.
6.  **Deep Sleep:** After successfully sending the data, the device goes back into deep sleep for a configured interval (`MICROSECOND_SLEEP`) to conserve power.

<details>
  <summary><strong>Flowchart</strong></summary>
  <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 927.489990234375 2054.8646240234375" style="max-width: 927.49px; cursor: pointer;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-diagram"><style>#mermaid-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-diagram .error-icon{fill:#552222;}#mermaid-diagram .error-text{fill:#552222;stroke:#552222;}#mermaid-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-diagram .marker{fill:#333333;stroke:#333333;}#mermaid-diagram .marker.cross{stroke:#333333;}#mermaid-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-diagram p{margin:0;}#mermaid-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-diagram .cluster-label text{fill:#333;}#mermaid-diagram .cluster-label span{color:#333;}#mermaid-diagram .cluster-label span p{background-color:transparent;}#mermaid-diagram .label text,#mermaid-diagram span{fill:#333;color:#333;}#mermaid-diagram .node rect,#mermaid-diagram .node circle,#mermaid-diagram .node ellipse,#mermaid-diagram .node polygon,#mermaid-diagram .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-diagram .rough-node .label text,#mermaid-diagram .node .label text,#mermaid-diagram .image-shape .label,#mermaid-diagram .icon-shape .label{text-anchor:middle;}#mermaid-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-diagram .rough-node .label,#mermaid-diagram .node .label,#mermaid-diagram .image-shape .label,#mermaid-diagram .icon-shape .label{text-align:center;}#mermaid-diagram .node.clickable{cursor:pointer;}#mermaid-diagram .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-diagram .arrowheadPath{fill:#333333;}#mermaid-diagram .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-diagram .flowchart-link{stroke:#333333;fill:none;}#mermaid-diagram .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-diagram .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-diagram .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-diagram .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-diagram .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-diagram .cluster text{fill:#333;}#mermaid-diagram .cluster span{color:#333;}#mermaid-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-diagram rect.text{fill:none;stroke-width:0;}#mermaid-diagram .icon-shape,#mermaid-diagram .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-diagram .icon-shape p,#mermaid-diagram .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-diagram .icon-shape rect,#mermaid-diagram .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M427.771,50.615L392.055,56.679C356.339,62.744,284.908,74.872,249.263,84.519C213.617,94.167,213.758,101.334,213.828,104.917L213.898,108.501"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M184.131,211.925L174.49,222.983C164.85,234.041,145.568,256.156,135.927,272.713C126.286,289.271,126.286,300.271,126.286,305.771L126.286,311.271"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_D_2" d="M257.063,198.684L283.668,211.949C310.273,225.213,363.483,251.742,390.088,270.506C416.693,289.271,416.693,300.271,416.693,305.771L416.693,311.271"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_E_3" d="M126.286,369.271L126.286,373.438C126.286,377.604,126.286,385.938,132.7,393.929C139.114,401.921,151.942,409.572,158.356,413.397L164.769,417.222"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_E_4" d="M416.693,369.271L416.693,373.438C416.693,377.604,416.693,385.938,401.055,394.106C385.418,402.274,354.143,410.276,338.505,414.278L322.868,418.279"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_F_5" d="M213.477,473.271L213.477,477.438C213.477,481.604,213.477,489.938,213.547,497.688C213.617,505.438,213.758,512.605,213.828,516.188L213.898,519.772"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_G_6" d="M179.462,661.162L171.381,672.998C163.3,684.834,147.138,708.506,139.057,733.008C130.977,757.51,130.977,782.844,130.977,808.177C130.977,833.51,130.977,858.844,130.977,892.818C130.977,926.792,130.977,969.406,130.977,1012.021C130.977,1054.635,130.977,1097.25,152.755,1124.815C174.534,1152.379,218.091,1164.894,239.869,1171.151L261.648,1177.409"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_A_7" d="M486.999,1176.865L501.468,1170.698C515.937,1164.531,544.875,1152.198,559.344,1124.724C573.813,1097.25,573.813,1054.635,573.813,1012.021C573.813,969.406,573.813,926.792,573.813,892.818C573.813,858.844,573.813,833.51,573.813,808.177C573.813,782.844,573.813,757.51,573.813,724.352C573.813,691.193,573.813,650.208,573.813,611.224C573.813,572.24,573.813,535.255,573.813,508.096C573.813,480.938,573.813,463.604,573.813,446.271C573.813,428.938,573.813,411.604,573.813,394.271C573.813,376.938,573.813,359.604,573.813,340.271C573.813,320.938,573.813,299.604,573.813,271.998C573.813,244.392,573.813,210.514,573.813,178.635C573.813,146.757,573.813,116.878,569.96,98.235C566.108,79.591,558.404,72.182,554.551,68.477L550.699,64.773"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_H_8" d="M261.714,647.94L279.273,661.979C296.831,676.019,331.948,704.098,349.507,723.638C367.065,743.177,367.065,754.177,367.065,759.677L367.065,765.177"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_H_I_9" d="M367.065,847.177L367.065,853.344C367.065,859.51,367.065,871.844,367.14,883.594C367.214,895.344,367.363,906.511,367.437,912.094L367.512,917.677"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_G_10" d="M367.565,1103.365L367.482,1109.448C367.398,1115.531,367.232,1127.698,369.221,1139.324C371.211,1150.949,375.357,1162.034,377.43,1167.576L379.503,1173.118"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_J_11" d="M431.777,1039.152L472.367,1055.938C512.957,1072.723,594.136,1106.294,634.725,1130.579C675.315,1154.865,675.315,1169.865,675.315,1177.365L675.315,1184.865"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_K_12" d="M675.315,1242.865L675.315,1249.031C675.315,1255.198,675.315,1267.531,675.315,1277.198C675.315,1286.865,675.315,1293.865,675.315,1297.365L675.315,1300.865"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_L_13" d="M675.315,1358.865L675.315,1363.031C675.315,1367.198,675.315,1375.531,675.385,1383.281C675.456,1391.032,675.596,1398.198,675.666,1401.782L675.737,1405.365"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_M_14" d="M719.601,1643.578L725.71,1656.959C731.818,1670.34,744.036,1697.103,750.144,1715.984C756.253,1734.865,756.253,1745.865,756.253,1751.365L756.253,1756.865"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_N_15" d="M632.029,1643.578L625.754,1656.959C619.478,1670.34,606.928,1697.103,600.653,1721.15C594.378,1745.198,594.378,1766.531,594.378,1785.865C594.378,1805.198,594.378,1822.531,600.302,1835.004C606.227,1847.477,618.076,1855.09,624,1858.896L629.925,1862.702"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_N_16" d="M756.253,1814.865L756.253,1819.031C756.253,1823.198,756.253,1831.531,750.328,1839.504C744.404,1847.477,732.555,1855.09,726.63,1858.896L720.706,1862.702"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_N_O_17" d="M675.315,1918.865L675.315,1923.031C675.315,1927.198,675.315,1935.531,680.442,1943.47C685.569,1951.408,695.823,1958.951,700.95,1962.723L706.077,1966.494"></path><path marker-end="url(#mermaid-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_O_A_18" d="M858.093,1968.865L868.326,1964.698C878.559,1960.531,899.024,1952.198,909.257,1939.365C919.49,1926.531,919.49,1909.198,919.49,1891.865C919.49,1874.531,919.49,1857.198,919.49,1839.865C919.49,1822.531,919.49,1805.198,919.49,1785.865C919.49,1766.531,919.49,1745.198,919.49,1705.198C919.49,1665.198,919.49,1606.531,919.49,1549.865C919.49,1493.198,919.49,1438.531,919.49,1402.531C919.49,1366.531,919.49,1349.198,919.49,1331.865C919.49,1314.531,919.49,1297.198,919.49,1277.865C919.49,1258.531,919.49,1237.198,919.49,1213.865C919.49,1190.531,919.49,1165.198,919.49,1131.224C919.49,1097.25,919.49,1054.635,919.49,1012.021C919.49,969.406,919.49,926.792,919.49,892.818C919.49,858.844,919.49,833.51,919.49,808.177C919.49,782.844,919.49,757.51,919.49,724.352C919.49,691.193,919.49,650.208,919.49,611.224C919.49,572.24,919.49,535.255,919.49,508.096C919.49,480.938,919.49,463.604,919.49,446.271C919.49,428.938,919.49,411.604,919.49,394.271C919.49,376.938,919.49,359.604,919.49,340.271C919.49,320.938,919.49,299.604,919.49,271.998C919.49,244.392,919.49,210.514,919.49,178.635C919.49,146.757,919.49,116.878,868.854,95.352C818.218,73.826,716.946,60.653,666.311,54.066L615.675,47.479"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(126.28646087646484, 278.2708435058594)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(416.69271087646484, 278.2708435058594)" class="edgeLabel"><g transform="translate(-9.401041984558105, -12)" class="label"><foreignObject height="24" width="18.80208396911621"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(130.97656774520874, 884.1770935058594)" class="edgeLabel"><g transform="translate(-9.401041984558105, -12)" class="label"><foreignObject height="24" width="18.80208396911621"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(367.0651054382324, 732.1770935058594)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(367.0651054382324, 1139.8645935058594)" class="edgeLabel"><g transform="translate(-9.401041984558105, -12)" class="label"><foreignObject height="24" width="18.80208396911621"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g transform="translate(675.3151068687439, 1139.8645935058594)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(756.2526082992554, 1723.8645935058594)" class="edgeLabel"><g transform="translate(-11.328125, -12)" class="label"><foreignObject height="24" width="22.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g></g><g transform="translate(594.3776054382324, 1787.8645935058594)" class="edgeLabel"><g transform="translate(-9.401041984558105, -12)" class="label"><foreignObject height="24" width="18.80208396911621"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(519.7395873069763, 35)" id="flowchart-A-38" class="node default"><rect height="54" width="183.9375" y="-27" x="-91.96875" style="" class="basic label-container"></rect><g transform="translate(-61.96875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="123.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Power On / Wake</p></span></div></foreignObject></g></g><g transform="translate(213.47656774520874, 176.6354217529297)" id="flowchart-B-39" class="node default"><polygon transform="translate(-64.63541793823242,64.63541793823242)" class="label-container" points="64.63541793823242,0 129.27083587646484,-64.63541793823242 64.63541793823242,-129.27083587646484 0,-64.63541793823242"></polygon><g transform="translate(-37.63541793823242, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="75.27083587646484"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>First Boot?</p></span></div></foreignObject></g></g><g transform="translate(126.28646087646484, 342.2708435058594)" id="flowchart-C-41" class="node default"><rect height="54" width="236.5729217529297" y="-27" x="-118.28646087646484" style="" class="basic label-container"></rect><g transform="translate(-88.28646087646484, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="176.5729217529297"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Perform First Boot Setup</p></span></div></foreignObject></g></g><g transform="translate(416.69271087646484, 342.2708435058594)" id="flowchart-D-43" class="node default"><rect height="54" width="244.23959350585938" y="-27" x="-122.11979675292969" style="" class="basic label-container"></rect><g transform="translate(-92.11979675292969, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="184.23959350585938"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Perform Wake-Up Routine</p></span></div></foreignObject></g></g><g transform="translate(213.47656774520874, 446.2708435058594)" id="flowchart-E-45" class="node default"><rect height="54" width="240.5" y="-27" x="-120.25" style="" class="basic label-container"></rect><g transform="translate(-90.25, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="180.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Attempt WiFi Connection</p></span></div></foreignObject></g></g><g transform="translate(213.47656774520874, 609.2239685058594)" id="flowchart-F-49" class="node default"><polygon transform="translate(-85.953125,85.953125)" class="label-container" points="85.953125,0 171.90625,-85.953125 85.953125,-171.90625 0,-85.953125"></polygon><g transform="translate(-58.953125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="117.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>WiFi Connected?</p></span></div></foreignObject></g></g><g transform="translate(395.49219274520874, 1215.8645935058594)" id="flowchart-G-51" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Enter Failsafe Deep Sleep Short Duration</p></span></div></foreignObject></g></g><g transform="translate(367.0651054382324, 808.1770935058594)" id="flowchart-H-55" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Attempt Azure IoT Connection</p></span></div></foreignObject></g></g><g transform="translate(367.0651054382324, 1012.0208435058594)" id="flowchart-I-57" class="node default"><polygon transform="translate(-90.84375,90.84375)" class="label-container" points="90.84375,0 181.6875,-90.84375 90.84375,-181.6875 0,-90.84375"></polygon><g transform="translate(-63.84375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="127.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Azure Connected?</p></span></div></foreignObject></g></g><g transform="translate(675.3151068687439, 1215.8645935058594)" id="flowchart-J-61" class="node default"><rect height="54" width="199.64584350585938" y="-27" x="-99.82292175292969" style="" class="basic label-container"></rect><g transform="translate(-69.82292175292969, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="139.64584350585938"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Collect Sensor Data</p></span></div></foreignObject></g></g><g transform="translate(675.3151068687439, 1331.8645935058594)" id="flowchart-K-63" class="node default"><rect height="54" width="201.6354217529297" y="-27" x="-100.81771087646484" style="" class="basic label-container"></rect><g transform="translate(-70.81771087646484, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="141.6354217529297"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Process Sensor Data</p></span></div></foreignObject></g></g><g transform="translate(675.3151068687439, 1547.8645935058594)" id="flowchart-L-65" class="node default"><polygon transform="translate(-139,139)" class="label-container" points="139,0 278,-139 139,-278 0,-139"></polygon><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Telemetry Threshold Reached?</p></span></div></foreignObject></g></g><g transform="translate(756.2526082992554, 1787.8645935058594)" id="flowchart-M-67" class="node default"><rect height="54" width="234.9479217529297" y="-27" x="-117.47396087646484" style="" class="basic label-container"></rect><g transform="translate(-87.47396087646484, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="174.9479217529297"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Send Telemetry to Azure</p></span></div></foreignObject></g></g><g transform="translate(675.3151068687439, 1891.8645935058594)" id="flowchart-N-69" class="node default"><rect height="54" width="184.53125" y="-27" x="-92.265625" style="" class="basic label-container"></rect><g transform="translate(-62.265625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="124.53125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Prepare for Sleep</p></span></div></foreignObject></g></g><g transform="translate(762.3151068687439, 2007.8645935058594)" id="flowchart-O-73" class="node default"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Enter Deep Sleep Long Duration</p></span></div></foreignObject></g></g></g></g></g></svg>  
</details>

<details>
  <summary><strong>Software Setup</strong></summary>
  
<svg aria-roledescription="sequence" role="graphics-document document" viewBox="-123.5 -10 1274 1147" style="max-width: 1274px; cursor: pointer;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-diagram"><g><rect class="actor actor-bottom" ry="3" rx="3" name="Sensors_Module" height="65" width="150" stroke="#666" fill="#eaeaea" y="1061" x="950.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1093.5" x="1025.5"><tspan dy="0" x="1025.5">Sensors_Module</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Azure_IoT_Client" height="65" width="150" stroke="#666" fill="#eaeaea" y="1061" x="750.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1093.5" x="825.5"><tspan dy="0" x="825.5">Azure_IoT_Client</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="WiFi_Driver" height="65" width="150" stroke="#666" fill="#eaeaea" y="1061" x="550.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1093.5" x="625.5"><tspan dy="0" x="625.5">WiFi_Driver</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="ESP32_Firmware" height="65" width="150" stroke="#666" fill="#eaeaea" y="1061" x="324.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1093.5" x="399.5"><tspan dy="0" x="399.5">ESP32_Firmware</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Power_Management" height="65" width="175" stroke="#666" fill="#eaeaea" y="1061" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="1093.5" x="87.5"><tspan dy="0" x="87.5">Power_Management</tspan></text></g><g><line name="Sensors_Module" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1061" x2="1025.5" y1="65" x1="1025.5" id="actor4"></line><g id="root-4"><rect class="actor actor-top" ry="3" rx="3" name="Sensors_Module" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="950.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1025.5"><tspan dy="0" x="1025.5">Sensors_Module</tspan></text></g></g><g><line name="Azure_IoT_Client" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1061" x2="825.5" y1="65" x1="825.5" id="actor3"></line><g id="root-3"><rect class="actor actor-top" ry="3" rx="3" name="Azure_IoT_Client" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="750.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="825.5"><tspan dy="0" x="825.5">Azure_IoT_Client</tspan></text></g></g><g><line name="WiFi_Driver" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1061" x2="625.5" y1="65" x1="625.5" id="actor2"></line><g id="root-2"><rect class="actor actor-top" ry="3" rx="3" name="WiFi_Driver" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="550.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="625.5"><tspan dy="0" x="625.5">WiFi_Driver</tspan></text></g></g><g><line name="ESP32_Firmware" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1061" x2="399.5" y1="65" x1="399.5" id="actor1"></line><g id="root-1"><rect class="actor actor-top" ry="3" rx="3" name="ESP32_Firmware" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="324.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="399.5"><tspan dy="0" x="399.5">ESP32_Firmware</tspan></text></g></g><g><line name="Power_Management" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="1061" x2="87.5" y1="65" x1="87.5" id="actor0"></line><g id="root-0"><rect class="actor actor-top" ry="3" rx="3" name="Power_Management" height="65" width="175" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="87.5"><tspan dy="0" x="87.5">Power_Management</tspan></text></g></g><style>#mermaid-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-diagram .error-icon{fill:#552222;}#mermaid-diagram .error-text{fill:#552222;stroke:#552222;}#mermaid-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-diagram .marker{fill:#333333;stroke:#333333;}#mermaid-diagram .marker.cross{stroke:#333333;}#mermaid-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-diagram p{margin:0;}#mermaid-diagram .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-diagram text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-diagram .actor-line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-diagram .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-diagram .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-diagram #arrowhead path{fill:#333;stroke:#333;}#mermaid-diagram .sequenceNumber{fill:white;}#mermaid-diagram #sequencenumber{fill:#333;}#mermaid-diagram #crosshead path{fill:#333;stroke:#333;}#mermaid-diagram .messageText{fill:#333;stroke:none;}#mermaid-diagram .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-diagram .labelText,#mermaid-diagram .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-diagram .loopText,#mermaid-diagram .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-diagram .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-diagram .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-diagram .noteText,#mermaid-diagram .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-diagram .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-diagram .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-diagram .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-diagram .actorPopupMenu{position:absolute;}#mermaid-diagram .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-diagram .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-diagram .actor-man circle,#mermaid-diagram line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><line class="loopLine" y2="501" x2="836.5" y1="501" x1="388.5"></line><line class="loopLine" y2="642" x2="836.5" y1="501" x1="836.5"></line><line class="loopLine" y2="642" x2="836.5" y1="642" x1="388.5"></line><line class="loopLine" y2="642" x2="388.5" y1="501" x1="388.5"></line><polygon class="labelBox" points="388.5,501 438.5,501 438.5,514 430.1,521 388.5,521"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="514" x="414">opt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="519" x="637.5"><tspan x="637.5">[Telemetry Threshold Reached]</tspan></text></g><g><line class="loopLine" y2="312" x2="1036.5" y1="312" x1="76.5"></line><line class="loopLine" y2="793" x2="1036.5" y1="312" x1="1036.5"></line><line class="loopLine" y2="793" x2="1036.5" y1="793" x1="76.5"></line><line class="loopLine" y2="793" x2="76.5" y1="312" x1="76.5"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="657" x2="1036.5" y1="657" x1="76.5"></line><polygon class="labelBox" points="76.5,312 126.5,312 126.5,325 118.1,332 76.5,332"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="325" x="102">alt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="330" x="581.5"><tspan x="581.5">[Connection Success]</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="675" x="556.5">[Connection Failed]</text></g><g><line class="loopLine" y2="171" x2="1046.5" y1="171" x1="66.5"></line><line class="loopLine" y2="944" x2="1046.5" y1="171" x1="1046.5"></line><line class="loopLine" y2="944" x2="1046.5" y1="944" x1="66.5"></line><line class="loopLine" y2="944" x2="66.5" y1="171" x1="66.5"></line><line style="stroke-dasharray: 3, 3;" class="loopLine" y2="808" x2="1046.5" y1="808" x1="66.5"></line><polygon class="labelBox" points="66.5,171 116.5,171 116.5,184 108.1,191 66.5,191"></polygon><text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="184" x="92">alt</text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="189" x="581.5"><tspan x="581.5">[Connection Success]</tspan></text><text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="826" x="556.5">[Connection Failed]</text></g><g><rect class="note" height="39" width="322" stroke="#666" fill="#EDF2AE" y="1002" x="-73.5"></rect><text style="font-size: 16px; font-weight: 400;" dy="1em" class="noteText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1007" x="88"><tspan x="88">Will restart sequence after timer expires</tspan></text></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="242">Wake Up Signal</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="113" x2="395.5" y1="113" x1="88.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="128" x="511">connect(SSID, Pass)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="161" x2="621.5" y1="161" x1="400.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="221" x="514">Connection Success</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="254" x2="403.5" y1="254" x1="624.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="269" x="611">connect(ConnectionString)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="302" x2="821.5" y1="302" x1="400.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="362" x="614">Connection Success</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="395" x2="403.5" y1="395" x1="824.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="410" x="711">readData()</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="443" x2="1021.5" y1="443" x1="400.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="458" x="714">sensorData</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="491" x2="403.5" y1="491" x1="1024.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="551" x="611">sendTelemetry(jsonData)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="584" x2="821.5" y1="584" x1="400.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="599" x="614">Send Confirmation</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="632" x2="403.5" y1="632" x1="824.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="702" x="614">Connection Failed</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="735" x2="403.5" y1="735" x1="824.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="750" x="245">enterDeepSleep(short_duration)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="783" x2="91.5" y1="783" x1="398.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="853" x="514">Connection Failed</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="886" x2="403.5" y1="886" x1="624.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="901" x="245">enterDeepSleep(short_duration)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="934" x2="91.5" y1="934" x1="398.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="959" x="245">enterDeepSleep(long_duration)</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="992" x2="91.5" y1="992" x1="398.5"></line></svg>
  
</details>

<details>
    <summary><strong>State Diagram</strong></summary>
    <svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 794.6690063476562 1320" style="max-width: 794.669px; cursor: pointer;" class="statediagram" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-diagram"><style>#mermaid-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-diagram .error-icon{fill:#552222;}#mermaid-diagram .error-text{fill:#552222;stroke:#552222;}#mermaid-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-diagram .marker{fill:#333333;stroke:#333333;}#mermaid-diagram .marker.cross{stroke:#333333;}#mermaid-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-diagram p{margin:0;}#mermaid-diagram defs #statediagram-barbEnd{fill:#333333;stroke:#333333;}#mermaid-diagram g.stateGroup text{fill:#9370DB;stroke:none;font-size:10px;}#mermaid-diagram g.stateGroup text{fill:#333;stroke:none;font-size:10px;}#mermaid-diagram g.stateGroup .state-title{font-weight:bolder;fill:#131300;}#mermaid-diagram g.stateGroup rect{fill:#ECECFF;stroke:#9370DB;}#mermaid-diagram g.stateGroup line{stroke:#333333;stroke-width:1;}#mermaid-diagram .transition{stroke:#333333;stroke-width:1;fill:none;}#mermaid-diagram .stateGroup .composit{fill:white;border-bottom:1px;}#mermaid-diagram .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaid-diagram .state-note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-diagram .state-note text{fill:black;stroke:none;font-size:10px;}#mermaid-diagram .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5;}#mermaid-diagram .edgeLabel .label rect{fill:#ECECFF;opacity:0.5;}#mermaid-diagram .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-diagram .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-diagram .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-diagram .edgeLabel .label text{fill:#333;}#mermaid-diagram .label div .edgeLabel{color:#333;}#mermaid-diagram .stateLabel text{fill:#131300;font-size:10px;font-weight:bold;}#mermaid-diagram .node circle.state-start{fill:#333333;stroke:#333333;}#mermaid-diagram .node .fork-join{fill:#333333;stroke:#333333;}#mermaid-diagram .node circle.state-end{fill:#9370DB;stroke:white;stroke-width:1.5;}#mermaid-diagram .end-state-inner{fill:white;stroke-width:1.5;}#mermaid-diagram .node rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-diagram .node polygon{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-diagram #statediagram-barbEnd{fill:#333333;}#mermaid-diagram .statediagram-cluster rect{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-diagram .cluster-label,#mermaid-diagram .nodeLabel{color:#131300;}#mermaid-diagram .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaid-diagram .statediagram-state .divider{stroke:#9370DB;}#mermaid-diagram .statediagram-state .title-state{rx:5px;ry:5px;}#mermaid-diagram .statediagram-cluster.statediagram-cluster .inner{fill:white;}#mermaid-diagram .statediagram-cluster.statediagram-cluster-alt .inner{fill:#f0f0f0;}#mermaid-diagram .statediagram-cluster .inner{rx:0;ry:0;}#mermaid-diagram .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaid-diagram .statediagram-state rect.divider{stroke-dasharray:10,10;fill:#f0f0f0;}#mermaid-diagram .note-edge{stroke-dasharray:5;}#mermaid-diagram .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid-diagram .statediagram-note rect{fill:#fff5ad;stroke:#aaaa33;stroke-width:1px;rx:0;ry:0;}#mermaid-diagram .statediagram-note text{fill:black;}#mermaid-diagram .statediagram-note .nodeLabel{color:black;}#mermaid-diagram .statediagram .edgeLabel{color:red;}#mermaid-diagram #dependencyStart,#mermaid-diagram #dependencyEnd{fill:#333333;stroke:#333333;stroke-width:1;}#mermaid-diagram .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="mermaid-diagram_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M334.523,22L334.523,26.167C334.523,30.333,334.523,38.667,334.523,47C334.523,55.333,334.523,63.667,334.523,67.833L334.523,72"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M334.523,112L334.523,116.167C334.523,120.333,334.523,128.667,334.523,137C334.523,145.333,334.523,153.667,334.523,157.833L334.523,162"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge2" d="M386.735,202L402.833,208.167C418.932,214.333,451.129,226.667,467.227,239C483.326,251.333,483.326,263.667,483.326,269.833L483.326,276"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge3" d="M269.93,197.544L241.217,204.453C212.505,211.363,155.081,225.181,126.368,241.591C97.656,258,97.656,277,97.656,294C97.656,311,97.656,326,97.656,341C97.656,356,97.656,371,97.656,388C97.656,405,97.656,424,97.656,443C97.656,462,97.656,481,97.656,500C97.656,519,97.656,538,97.656,557C97.656,576,97.656,595,97.656,612C97.656,629,97.656,644,97.656,659C97.656,674,97.656,689,97.656,706C97.656,723,97.656,742,97.656,761C97.656,780,97.656,799,97.656,816C97.656,833,97.656,848,97.656,863C97.656,878,97.656,893,97.656,910C97.656,927,97.656,946,97.656,965C97.656,984,97.656,1003,97.656,1020C97.656,1037,97.656,1052,97.656,1067C97.656,1082,97.656,1097,97.656,1112C97.656,1127,97.656,1142,97.656,1157C97.656,1172,97.656,1187,97.656,1202C97.656,1217,97.656,1232,135.504,1245.339C173.352,1258.678,249.047,1270.355,286.895,1276.194L324.742,1282.033"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge4" d="M483.326,316L483.326,320.167C483.326,324.333,483.326,332.667,483.326,341C483.326,349.333,483.326,357.667,483.326,361.833L483.326,366"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge5" d="M453.961,1284.682L509.412,1278.402C564.864,1272.122,675.766,1259.561,731.218,1245.78C786.669,1232,786.669,1217,786.669,1202C786.669,1187,786.669,1172,786.669,1157C786.669,1142,786.669,1127,786.669,1112C786.669,1097,786.669,1082,786.669,1067C786.669,1052,786.669,1037,786.669,1020C786.669,1003,786.669,984,786.669,965C786.669,946,786.669,927,786.669,910C786.669,893,786.669,878,786.669,863C786.669,848,786.669,833,786.669,816C786.669,799,786.669,780,786.669,761C786.669,742,786.669,723,786.669,706C786.669,689,786.669,674,786.669,659C786.669,644,786.669,629,786.669,612C786.669,595,786.669,576,786.669,557C786.669,538,786.669,519,786.669,500C786.669,481,786.669,462,748.011,445.236C709.353,428.472,632.037,413.944,593.379,406.68L554.721,399.416"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge6" d="M483.326,406L483.326,412.167C483.326,418.333,483.326,430.667,483.326,443C483.326,455.333,483.326,467.667,483.326,473.833L483.326,480"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge7" d="M411.93,400.126L375.813,407.272C339.697,414.417,267.464,428.709,231.348,445.354C195.232,462,195.232,481,195.232,500C195.232,519,195.232,538,199.856,553.667C204.481,569.333,213.731,581.667,218.355,587.833L222.98,594"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge8" d="M510.293,520L518.608,526.167C526.923,532.333,543.552,544.667,551.867,557C560.182,569.333,560.182,581.667,560.182,587.833L560.182,594"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge9" d="M430.212,520L413.836,526.167C397.459,532.333,364.706,544.667,338.163,557C311.62,569.333,291.286,581.667,281.119,587.833L270.952,594"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge10" d="M560.182,634L560.182,638.167C560.182,642.333,560.182,650.667,560.182,659C560.182,667.333,560.182,675.667,560.182,679.833L560.182,684"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge11" d="M560.182,724L560.182,730.167C560.182,736.333,560.182,748.667,560.182,761C560.182,773.333,560.182,785.667,560.182,791.833L560.182,798"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge12" d="M560.182,838L560.182,842.167C560.182,846.333,560.182,854.667,560.182,863C560.182,871.333,560.182,879.667,560.182,883.833L560.182,888"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge13" d="M595.889,928L606.898,934.167C617.908,940.333,639.926,952.667,650.936,965C661.945,977.333,661.945,989.667,661.945,995.833L661.945,1002"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge14" d="M524.476,928L513.467,934.167C502.457,940.333,480.438,952.667,469.429,968.333C458.419,984,458.419,1003,458.419,1020C458.419,1037,458.419,1052,467.842,1063.667C477.264,1075.333,496.109,1083.667,505.532,1087.833L514.954,1092"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge15" d="M661.945,1042L661.945,1046.167C661.945,1050.333,661.945,1058.667,652.523,1067C643.1,1075.333,624.255,1083.667,614.833,1087.833L605.41,1092"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge16" d="M560.182,1132L560.182,1136.167C560.182,1140.333,560.182,1148.667,560.182,1157C560.182,1165.333,560.182,1173.667,560.182,1177.833L560.182,1182"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge17" d="M237.979,634L237.979,638.167C237.979,642.333,237.979,650.667,237.979,662.333C237.979,674,237.979,689,237.979,706C237.979,723,237.979,742,237.979,761C237.979,780,237.979,799,237.979,816C237.979,833,237.979,848,237.979,863C237.979,878,237.979,893,237.979,910C237.979,927,237.979,946,237.979,965C237.979,984,237.979,1003,237.979,1020C237.979,1037,237.979,1052,237.979,1067C237.979,1082,237.979,1097,237.979,1112C237.979,1127,237.979,1142,237.979,1157C237.979,1172,237.979,1187,237.979,1202C237.979,1217,237.979,1232,252.44,1243.799C266.9,1255.598,295.821,1264.195,310.282,1268.494L324.742,1272.793"></path><path marker-end="url(#mermaid-diagram_stateDiagram-barbEnd)" style=";fill:none" class="edge-thickness-normal edge-pattern-solid transition" id="edge18" d="M560.182,1222L560.182,1226.167C560.182,1230.333,560.182,1238.667,542.479,1247.497C524.775,1256.327,489.368,1265.654,471.665,1270.317L453.961,1274.981"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(483.3255271911621, 239)" class="edgeLabel"><g transform="translate(-87.546875, -12)" class="label"><foreignObject height="24" width="175.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>rtc_is_first_boot == true</p></span></div></foreignObject></g></g><g transform="translate(97.65625, 761)" class="edgeLabel"><g transform="translate(-89.65625, -12)" class="label"><foreignObject height="24" width="179.3125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>rtc_is_first_boot == false</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(483.3255271911621, 443)" class="edgeLabel"><g transform="translate(-68.21875, -12)" class="label"><foreignObject height="24" width="136.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>connection success</p></span></div></foreignObject></g></g><g transform="translate(195.23177337646484, 500)" class="edgeLabel"><g transform="translate(-65.49479675292969, -12)" class="label"><foreignObject height="24" width="130.98959350585938"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>connection failure</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 557)" class="edgeLabel"><g transform="translate(-68.21875, -12)" class="label"><foreignObject height="24" width="136.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>connection success</p></span></div></foreignObject></g></g><g transform="translate(331.95313262939453, 557)" class="edgeLabel"><g transform="translate(-65.49479675292969, -12)" class="label"><foreignObject height="24" width="130.98959350585938"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>connection failure</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(661.9453201293945, 965)" class="edgeLabel"><g transform="translate(-64.97396087646484, -12)" class="label"><foreignObject height="24" width="129.9479217529297"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>threshold reached</p></span></div></foreignObject></g></g><g transform="translate(458.4192810058594, 1022)" class="edgeLabel"><g transform="translate(-79.21875, -12)" class="label"><foreignObject height="24" width="158.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>threshold not reached</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(334.52344131469727, 15)" id="state-root_start-0" class="node default"><circle height="14" width="14" r="7" class="state-start"></circle></g><g transform="translate(334.52344131469727, 92)" id="state-PowerOn-1" class="node  statediagram-state"><rect height="40" width="79.13541793823242" y="-20" x="-39.56770896911621" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-31.56770896911621, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="63.13541793823242"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PowerOn</p></span></div></foreignObject></g></g><g transform="translate(334.52344131469727, 182)" id="state-CheckBootMode-3" class="node  statediagram-state"><rect height="40" width="129.1875" y="-20" x="-64.59375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-56.59375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="113.1875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CheckBootMode</p></span></div></foreignObject></g></g><g transform="translate(483.3255271911621, 296)" id="state-FirstBoot_Setup-4" class="node  statediagram-state"><rect height="40" width="129.3854217529297" y="-20" x="-64.69271087646484" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-56.692710876464844, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="113.38542175292969"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FirstBoot_Setup</p></span></div></foreignObject></g></g><g transform="translate(389.35156631469727, 1292)" id="state-WakeFromSleep-18" class="node  statediagram-state"><rect height="40" width="129.21875" y="-20" x="-64.609375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-56.609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="113.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>WakeFromSleep</p></span></div></foreignObject></g></g><g transform="translate(483.3255271911621, 386)" id="state-ConnectingToWiFi-7" class="node  statediagram-state"><rect height="40" width="142.7916717529297" y="-20" x="-71.39583587646484" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-63.395835876464844, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="126.79167175292969"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ConnectingToWiFi</p></span></div></foreignObject></g></g><g transform="translate(483.3255271911621, 500)" id="state-ConnectingToAzureIoT-9" class="node  statediagram-state"><rect height="40" width="174.90625" y="-20" x="-87.453125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-79.453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="158.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ConnectingToAzureIoT</p></span></div></foreignObject></g></g><g transform="translate(237.9791717529297, 614)" id="state-FailsafeDeepSleep-17" class="node  statediagram-state"><rect height="40" width="146.5729217529297" y="-20" x="-73.28646087646484" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-65.28646087646484, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="130.5729217529297"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FailsafeDeepSleep</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 614)" id="state-Operational_Idle-10" class="node  statediagram-state"><rect height="40" width="135.61458587646484" y="-20" x="-67.80729293823242" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-59.80729293823242, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="119.61458587646484"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Operational_Idle</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 704)" id="state-CollectSensorData-11" class="node  statediagram-state"><rect height="40" width="146" y="-20" x="-73" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-65, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="130"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CollectSensorData</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 818)" id="state-ProcessSensorData-12" class="node  statediagram-state"><rect height="40" width="148" y="-20" x="-74" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-66, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="132"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ProcessSensorData</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 908)" id="state-CheckTelemetryTrigger-14" class="node  statediagram-state"><rect height="40" width="180.28125" y="-20" x="-90.140625" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-82.140625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="164.28125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CheckTelemetryTrigger</p></span></div></foreignObject></g></g><g transform="translate(661.9453201293945, 1022)" id="state-SendTelemetryToAzure-15" class="node  statediagram-state"><rect height="40" width="178.61459350585938" y="-20" x="-89.30729675292969" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-81.30729675292969, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="162.61459350585938"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>SendTelemetryToAzure</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 1112)" id="state-PrepareForSleep-16" class="node  statediagram-state"><rect height="40" width="133.375" y="-20" x="-66.6875" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-58.6875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="117.375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PrepareForSleep</p></span></div></foreignObject></g></g><g transform="translate(560.182300567627, 1202)" id="state-DeepSleep-18" class="node  statediagram-state"><rect height="40" width="90.96875" y="-20" x="-45.484375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-37.484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="74.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>DeepSleep</p></span></div></foreignObject></g></g></g></g></g></svg>
</details>


-----

## üöÄ Getting Started

### Prerequisites

1.  Install [Visual Studio Code](https://code.visualstudio.com/).
2.  Install the [PlatformIO IDE extension](https://platformio.org/platformio-ide) in VS Code.
3.  Clone this repository.

### Configuration

If `NO_PROVISIONING` is defined in the config.h file, before uploading the firmware, you need to provide your credentials:

1.  Navigate to `lib/config/`.
2.  Create a file named `secreets.h` from `secreets.h.example` or edit the existing one.
3.  Add your Wi-Fi and Azure IoT Hub Device Connection String details:

<!-- end list -->

```cpp
// lib/config/secreets.h

#define WIFI_SSID "YOUR_WIFI_SSID"
#define WIFI_PASSWORD "YOUR_WIFI_PASSWORD"
#define IOTHUB_CONNECTION_STRING "YOUR_AZURE_IOT_HUB_DEVICE_CONNECTION_STRING"
```

> **Note:** For initial setup, you can leave the Wi-Fi credentials blank and use the **BLE provisioning flow** to configure them with your smartphone.

### Build & Upload

1.  Open the project folder in VS Code.
2.  PlatformIO will automatically detect the `platformio.ini` file and download the required dependencies.
3.  Connect your ESP32-C3 device.
4.  Use the PlatformIO toolbar to **Build** and then **Upload** the project.

### Provisioning the Device via BLE
> **Note:** If you are setting up the device for the first time without hardcoding Wi-Fi credentials in `secreets.h`, you can provision it using Bluetooth Low Energy (BLE) and a smartphone app.

**1. Install the App:** On your smartphone, install a compatible Wi-Fi provisioning app.
* **Android:** [ESP BLE Prov](https://play.google.com/store/apps/details?id=com.espressif.provble)
* **iOS:** [ESP BLE Provisioning](https://apps.apple.com/us/app/esp-ble-provisioning/id1473215902)

**2. Flash the Firmware:** Build and upload the project to your ESP32-C3. The device will now be discoverable via BLE.

**3. Connect and Send Credentials:** You can connect to the device using one of two methods:

**Method A: Using the QR Code (Recommended)**
1.  Open the Serial Monitor in PlatformIO. You will see boot messages, followed by a **QR Code**.
2.  In the app, choose the option to scan a QR code and scan the one from the Serial Monitor.
3.  The app will connect automatically.

**Method B: Manual Connection**
1.  If you don't have access to the Serial Monitor, open the app and tap on "Provision Device" (or a similar option).
2.  The app will scan for nearby BLE devices. Look for a device named **`PROV_moorgan_colar`** and select it.
3.  You may be prompted for a "Proof of Possession" (POP) or password. If one is configured, enter it.

**4. Final Step (For Both Methods):**
* Once connected, the app will prompt you to select a Wi-Fi network (SSID) and enter its password.
* Enter your credentials and send them to the device.
* The device will then connect to your Wi-Fi, and the provisioning process is complete. It will remember these credentials for future boots.

-----

## üìö Complete Documentation & Project Links

  * \*\* Notion Documentation (Detailed):\*\* [Moorgan Documentation](https://stanley-n-wijaya.notion.site/Moorgan-Documentation-1df73555b71f80fd9fd9dbfc655ce5a7?pvs=4)
  * \*\* Demo Video:\*\* [Link to Demo Video on SharePoint](https://binusianorg-my.sharepoint.com/personal/stanley_wijaya004_binus_ac_id/_layouts/15/guestaccess.aspx?share=EYMWsQ71C9NHv2bWAHrP4L8BMcDJ3e6a9U_hsyYi_i-wlw&nav=eyJyZWZlcnJhbEluZm8iOnsicmVmZXJyYWxBcHAiOiJPbmVEcml2ZUZvckJ1c2luZXNzIiwicmVmZXJyYWxBcHBQbGF0Zm9ybSI6IldlYiIsInJlZmVycmFsTW9kZSI6InZpZXciLCJyZWZlcnJhbFZpZXciOiJNeUZpbGVzTGlua0NvcHkifX0&e=eWRR7c)
  * \*\* Moorgan Google Drive:\*\* [Documents + Preliminary Research](https://drive.google.com/drive/folders/1Slexo254LAhwieCQazA-peBe4Vl8fZJ5?usp=sharing)

-----

## üåê All GitHub Repositories

  * **Main Repository:** [StyNW7/Moorgan](https://github.com/StyNW7/Moorgan)
  * **Frontend Repository:** [StyNW7/Moorgan-Frontend](https://github.com/StyNW7/Moorgan-Frontend)
  * **Backend Repository:** [StyNW7/Moorgan-Backend](https://github.com/StyNW7/Moorgan-Backend)
  * **AI Repository:** [StyNW7/Moorgan-AI](https://github.com/StyNW7/Moorgan-AI)
  * **IoT Repository (You are here):** [StyNW7/Moorgan-IoT](https://github.com/StyNW7/Moorgan-IoT)

[platform-link]: https://platformio.org/
[framework-link]: https://www.arduino.cc/
[language-link]: https://isocpp.org/
[azure-link]: https://azure.microsoft.com/en-us/services/iot-hub/